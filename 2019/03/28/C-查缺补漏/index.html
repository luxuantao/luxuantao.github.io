<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #FFFFCC; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Welcome to Luson's home" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2" />






<meta name="description" content="这是本博客有史以来最长的一篇文章，总结了我从大一至今，遇到的几乎所有不易理解或是容易忘记的C++知识，可作为手册查阅，内容参考自清华大学郑莉教授的C++课程。">
<meta property="og:type" content="article">
<meta property="og:title" content="C++查缺补漏">
<meta property="og:url" content="https://luxuantao.github.io/2019/03/28/C-查缺补漏/index.html">
<meta property="og:site_name" content="Welcome to Luson&#39;s home">
<meta property="og:description" content="这是本博客有史以来最长的一篇文章，总结了我从大一至今，遇到的几乎所有不易理解或是容易忘记的C++知识，可作为手册查阅，内容参考自清华大学郑莉教授的C++课程。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-28T11:40:30.432Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C++查缺补漏">
<meta name="twitter:description" content="这是本博客有史以来最长的一篇文章，总结了我从大一至今，遇到的几乎所有不易理解或是容易忘记的C++知识，可作为手册查阅，内容参考自清华大学郑莉教授的C++课程。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://luxuantao.github.io/2019/03/28/C-查缺补漏/"/>





  <title>C++查缺补漏 | Welcome to Luson's home</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>
	 <a href="https://github.com/luxuantao">
	   <img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png">
	 </a>
	 
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Welcome to Luson's home</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">就怕你宁愿流泪望天却不昂首向前</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luxuantao.github.io/2019/03/28/C-查缺补漏/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陆轩韬">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to Luson's home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">C++查缺补漏</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-28T19:33:29+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/c/" itemprop="url" rel="index">
                    <span itemprop="name">c++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/03/28/C-查缺补漏/" class="leancloud_visitors" data-flag-title="C++查缺补漏">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度 </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃&nbsp; | &nbsp;</span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  11,392 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  47 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>这是本博客有史以来最长的一篇文章，总结了我从大一至今，遇到的几乎所有不易理解或是容易忘记的C++知识，可作为手册查阅，内容参考自清华大学郑莉教授的C++课程。</p>
<hr>
<a id="more"></a>
<h1 id="内联函数"><a href="#内联函数" class="headerlink" title="内联函数"></a>内联函数</h1><p>声明时使用关键字 inline</p>
<p>编译时在调用处用函数体进行替换，节省了参数传递、控制转移等开销</p>
<p>注意：</p>
<p>内联函数体内不能有循环语句和switch语句</p>
<p>内联函数的定义必须出现在内联函数第一次被调用之前</p>
<p>对内联函数不能进行异常接口声明</p>
<p>定义内联函数，可以显式用inline声明，也可以直接在类内定义好实现</p>
<p>编译器并不一定遵从我们的inline</p>
<h1 id="constexpr函数"><a href="#constexpr函数" class="headerlink" title="constexpr函数"></a>constexpr函数</h1><p>constexpr修饰的函数在其所有参数都是constexpr时，一定返回constexpr</p>
<p>函数体中必须有且仅有一条return语句</p>
<p>constexpr的变量的值必须是编译器在编译的时候就可以确定的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">int</span> <span class="title">get_size</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">20</span>; &#125;</div><div class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> foo = get_size();  <span class="comment">//正确：foo是一个常量表达式</span></div></pre></td></tr></table></figure>
<h1 id="重载函数"><a href="#重载函数" class="headerlink" title="重载函数"></a>重载函数</h1><p>通过形参的个数不同或者类型不同进行区分</p>
<p>无法通过返回值区分</p>
<h1 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h1><h2 id="默认构造函数"><a href="#默认构造函数" class="headerlink" title="默认构造函数"></a>默认构造函数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//下面两个都是默认构造函数，如在类中同时出现，将产生编译错误：</span></div><div class="line">Clock();</div><div class="line">Clock(<span class="keyword">int</span> newH=<span class="number">0</span>,<span class="keyword">int</span> newM=<span class="number">0</span>,<span class="keyword">int</span> newS=<span class="number">0</span>);</div></pre></td></tr></table></figure>
<h2 id="隐含生成的构造函数"><a href="#隐含生成的构造函数" class="headerlink" title="隐含生成的构造函数"></a>隐含生成的构造函数</h2><p>如果程序中未定义构造函数，编译器将在需要时自动生成一个默认构造函数</p>
<p>参数列表为空，不为数据成员设置初始值</p>
<p>如果类内定义了成员的初始值，则使用类内定义的初始值</p>
<p>如果没有定义类内的初始值，则以默认方式初始化</p>
<p>基本类型的数据默认初始化的值是不确定的</p>
<h2 id="default"><a href="#default" class="headerlink" title="=default"></a>=default</h2><p>如果程序中已定义构造函数，默认情况下编译器就不再隐含生成默认构造函数。如果此时依然希望编译器隐含生成默认构造函数，可以使用<code>=default</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">   Clock() =<span class="keyword">default</span>; <span class="comment">//指示编译器提供默认构造函数</span></div><div class="line">   Clock(<span class="keyword">int</span> newH, <span class="keyword">int</span> newM, <span class="keyword">int</span> newS);     <span class="comment">//构造函数</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">   <span class="keyword">int</span> hour, minute, second;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="委托构造函数"><a href="#委托构造函数" class="headerlink" title="委托构造函数"></a>委托构造函数</h2><p>类中往往有多个构造函数，只是参数表和初始化列表不同，其初始化算法都是相同的，这时，为了避免代码重复，可以使用委托构造函数</p>
<p>不使用委托构造函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//构造函数</span></div><div class="line">Clock(<span class="keyword">int</span> newH, <span class="keyword">int</span> newM, <span class="keyword">int</span> newS) : hour(newH),minute(newM),second(newS) &#123;&#125;</div><div class="line"><span class="comment">//默认构造函数</span></div><div class="line">Clock() : hour(<span class="number">0</span>),minute(<span class="number">0</span>),second(<span class="number">0</span>) &#123;&#125;</div></pre></td></tr></table></figure>
<p>使用委托构造函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Clock(<span class="keyword">int</span> newH, <span class="keyword">int</span> newM, <span class="keyword">int</span> newS) : hour(newH),minute(newM),second(newS) &#123;&#125;</div><div class="line">Clock(): Clock(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) &#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="复制构造函数"><a href="#复制构造函数" class="headerlink" title="复制构造函数"></a>复制构造函数</h2><p>复制构造函数是一种特殊的构造函数，其形参为本类的对象引用，作用是用一个已存在的对象去初始化同类型的新对象</p>
<p>定义一个对象时，以本类另一个对象作为初始值，发生复制构造</p>
<p>如果函数的形参是类的对象，调用函数时，将使用实参对象初始化形参对象，发生复制构造</p>
<p>如果函数的返回值是类的对象，函数执行完成返回主调函数时，将使用return语句中的对象初始化一个临时无名对象，传递给主调函数，此时发生复制构造</p>
<h2 id="隐含的复制构造函数"><a href="#隐含的复制构造函数" class="headerlink" title="隐含的复制构造函数"></a>隐含的复制构造函数</h2><p>如果程序员没有为类声明拷贝初始化构造函数，则编译器自己生成一个隐含的复制构造函数</p>
<p>这个构造函数执行的功能是：用作为初始值的对象的每个数据成员的值，初始化将要建立的对象的对应数据成员（浅拷贝）</p>
<h2 id="delete"><a href="#delete" class="headerlink" title="=delete"></a>=delete</h2><p>C++11做法：用<code>=delete</code>指示编译器不生成默认复制构造函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span>   <span class="comment">//Point 类的定义</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Point(<span class="keyword">int</span> xx=<span class="number">0</span>, <span class="keyword">int</span> yy=<span class="number">0</span>) &#123; x = xx; y = yy; &#125;    <span class="comment">//构造函数，内联</span></div><div class="line">    Point(<span class="keyword">const</span> Point&amp; p) =<span class="keyword">delete</span>;  <span class="comment">//指示编译器不生成默认复制构造函数</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> x, y; <span class="comment">//私有数据</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h1 id="类的组合"><a href="#类的组合" class="headerlink" title="类的组合"></a>类的组合</h1><h2 id="构造组合类对象时的初始化次序"><a href="#构造组合类对象时的初始化次序" class="headerlink" title="构造组合类对象时的初始化次序"></a>构造组合类对象时的初始化次序</h2><p>首先对构造函数初始化列表中列出的成员（包括基本类型成员和对象成员）进行初始化，初始化次序是成员在类体中定义的次序</p>
<p>成员对象构造函数调用顺序：按对象成员的声明顺序，先声明者先构造</p>
<p>初始化列表中未出现的成员对象：调用用默认构造函数（即无形参的）初始化</p>
<p>处理完初始化列表之后，再执行构造函数的函数体</p>
<h2 id="前向引用声明"><a href="#前向引用声明" class="headerlink" title="前向引用声明"></a>前向引用声明</h2><p>如果需要在某个类的声明之前，引用该类，则应进行前向引用声明</p>
<p>前向引用声明只为程序引入一个标识符，但具体声明在其他地方</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>;</span>  <span class="comment">//前向引用声明</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(B b)</span></span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">(A a)</span></span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>使用前向引用声明虽然可以解决一些问题，但它并不是万能的</p>
<p>在提供一个完整的类声明之前，不能声明该类的对象，也不能在内联成员函数中使用该类的对象</p>
<p>当使用前向引用声明时，只能使用被声明的符号，而不能涉及类的任何细节</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fred</span>;</span> <span class="comment">//前向引用声明</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Barney</span> &#123;</span></div><div class="line">   Fred x; <span class="comment">//错误：类Fred的声明尚不完善</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fred</span> &#123;</span></div><div class="line">   Barney y;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h1 id="联合体"><a href="#联合体" class="headerlink" title="联合体"></a>联合体</h1><p>成员共用同一组内存单元</p>
<p>任何两个成员不会同时有效</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExamInfo</span> &#123;</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="built_in">string</span> name;	<span class="comment">//课程名称</span></div><div class="line">	<span class="keyword">enum</span> &#123; GRADE, PASS, PERCENTAGE &#125; mode;<span class="comment">//计分方式</span></div><div class="line">	<span class="keyword">union</span> &#123;</div><div class="line">		<span class="keyword">char</span> grade;	<span class="comment">//等级制的成绩</span></div><div class="line">		<span class="keyword">bool</span> pass;	<span class="comment">//只记是否通过课程的成绩</span></div><div class="line">		<span class="keyword">int</span> percent;	<span class="comment">//百分制的成绩</span></div><div class="line">	&#125;;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="comment">//三种构造函数，分别用等级、是否通过和百分初始化</span></div><div class="line">	ExamInfo(<span class="built_in">string</span> name, <span class="keyword">char</span> grade)</div><div class="line">		: name(name), mode(GRADE), grade(grade) &#123; &#125;</div><div class="line">	ExamInfo(<span class="built_in">string</span> name, <span class="keyword">bool</span> pass)</div><div class="line">		: name(name), mode(PASS), pass(pass) &#123; &#125;</div><div class="line">	ExamInfo(<span class="built_in">string</span> name, <span class="keyword">int</span> percent)</div><div class="line">		: name(name), mode(PERCENTAGE), percent(percent) &#123; &#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> ExamInfo::show() &#123;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">": "</span>;</div><div class="line">	<span class="keyword">switch</span> (mode) &#123;</div><div class="line">	  <span class="keyword">case</span> GRADE: <span class="built_in">cout</span> &lt;&lt; grade;  <span class="keyword">break</span>;</div><div class="line">	  <span class="keyword">case</span> PASS: <span class="built_in">cout</span> &lt;&lt; (pass ? <span class="string">"PASS"</span> : <span class="string">"FAIL"</span>); <span class="keyword">break</span>;</div><div class="line">	  <span class="keyword">case</span> PERCENTAGE: <span class="built_in">cout</span> &lt;&lt; percent; <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="function">ExamInfo <span class="title">course1</span><span class="params">(<span class="string">"English"</span>, <span class="string">'B'</span>)</span></span>;</div><div class="line">	<span class="function">ExamInfo <span class="title">course2</span><span class="params">(<span class="string">"Calculus"</span>, <span class="literal">true</span>)</span></span>;</div><div class="line">	<span class="function">ExamInfo <span class="title">course3</span><span class="params">(<span class="string">"C++ Programming"</span>, <span class="number">85</span>)</span></span>;</div><div class="line">	course1.show();</div><div class="line">	course2.show();</div><div class="line">	course3.show();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//运行结果：</span></div><div class="line"><span class="comment">//English: B</span></div><div class="line"><span class="comment">//Calculus: PASS</span></div><div class="line"><span class="comment">//C++ Programming: 85</span></div></pre></td></tr></table></figure>
<h1 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//enum class 枚举类型名: 底层类型 &#123;枚举值列表&#125;;</span></div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">Type</span> &#123;</span> General, Light, Medium, Heavy&#125;;</div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">Type</span>:</span> <span class="keyword">char</span> &#123; General, Light, Medium, Heavy&#125;;</div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> &#123;</span> General=<span class="number">1</span>, Pistol, MachineGun, Cannon&#125;;</div></pre></td></tr></table></figure>
<p>枚举类的优势</p>
<p>强作用域，其作用域限制在枚举类中</p>
<p>转换限制，枚举类对象不可以与整型隐式地互相转换。</p>
<p>可以指定底层类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">Side</span>&#123;</span> Right, Left &#125;;</div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">Thing</span>&#123;</span> Wrong, Right &#125;;  <span class="comment">//不冲突</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    Side s = Side::Right;</div><div class="line">    Thing w = Thing::Wrong;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; (s == w) &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//编译错误，无法直接比较不同枚举类</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="类的友元"><a href="#类的友元" class="headerlink" title="类的友元"></a>类的友元</h1><p>友元是C++提供的一种破坏数据封装和数据隐藏的机制</p>
<p>通过将一个模块声明为另一个模块的友元，一个模块能够引用到另一个模块中本是被隐藏的信息</p>
<p>为了确保数据的完整性，及数据封装与隐藏的原则，建议尽量不使用或少使用友元</p>
<h2 id="友元函数"><a href="#友元函数" class="headerlink" title="友元函数"></a>友元函数</h2><p>友元函数是在类声明中由关键字friend修饰说明的非成员函数，在它的函数体中能够通过对象名访问 private 和protected成员</p>
<p>作用：增加灵活性，使程序员可以在封装和快速性方面做合理选择</p>
<p>访问对象中的成员必须通过对象名</p>
<h2 id="友元类"><a href="#友元类" class="headerlink" title="友元类"></a>友元类</h2><p>若一个类为另一个类的友元，则此类的所有成员都能访问对方类的私有成员</p>
<p>声明语法：将友元类名在另一个类中使用friend修饰说明</p>
<h2 id="类的友元关系是单向的"><a href="#类的友元关系是单向的" class="headerlink" title="类的友元关系是单向的"></a>类的友元关系是单向的</h2><p>如果声明B类是A类的友元，B类的成员函数就可以访问A类的私有和保护数据，但A类的成员函数却不能访问B类的私有、保护数据</p>
<h1 id="常类型"><a href="#常类型" class="headerlink" title="常类型"></a>常类型</h1><p>对于既需要共享、又需要防止改变的数据应该声明为<strong>常类型</strong>（用const进行修饰）</p>
<p>const关键字可以被用于参与对重载函数的区分</p>
<p>通过常对象只能调用它的常成员函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">R</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  R(<span class="keyword">int</span> r1, <span class="keyword">int</span> r2) : r1(r1), r2(r2) &#123; &#125;</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keyword">int</span> r1, r2;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">void</span> R::print() &#123;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; r1 &lt;&lt; <span class="string">":"</span> &lt;&lt; r2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> R::print() <span class="keyword">const</span> &#123;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; r1 &lt;&lt; <span class="string">";"</span> &lt;&lt; r2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="function">R <span class="title">a</span><span class="params">(<span class="number">5</span>,<span class="number">4</span>)</span></span>;</div><div class="line">  a.print(); <span class="comment">//调用void print()</span></div><div class="line">  <span class="function"><span class="keyword">const</span> R <span class="title">b</span><span class="params">(<span class="number">20</span>,<span class="number">52</span>)</span></span>; </div><div class="line">  b.print(); <span class="comment">//调用void print() const</span></div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> 常成员函数可以被非常对象调用，但常对象不可调用非常成员函数</p>
<h1 id="多文件结构"><a href="#多文件结构" class="headerlink" title="多文件结构"></a>多文件结构</h1><h2 id="外部变量"><a href="#外部变量" class="headerlink" title="外部变量"></a>外部变量</h2><p>如果一个变量除了在定义它的源文件中可以使用外，还能被其它文件使用，那么就称这个变量是外部变量</p>
<p>文件作用域中定义的变量，默认情况下都是外部变量，但在其它文件中如果需要使用这一变量，需要用extern关键字加以声明</p>
<h2 id="外部函数"><a href="#外部函数" class="headerlink" title="外部函数"></a>外部函数</h2><p>在所有类之外声明的函数（也就是非成员函数），都是具有文件作用域的</p>
<p>这样的函数都可以在不同的编译单元中被调用，只要在调用之前进行引用性声明（即声明函数原型）即可。也可以在声明函数原型或定义函数时用extern修饰，其效果与不加修饰的默认状态是一样的</p>
<h1 id="编译预处理指令"><a href="#编译预处理指令" class="headerlink" title="编译预处理指令"></a>编译预处理指令</h1><p>预处理在编译前进行</p>
<p>每条预处理指令必须单独占用一行</p>
<p>预处理指令可以出现在程序的任何位置</p>
<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><h2 id="空值nullptr"><a href="#空值nullptr" class="headerlink" title="空值nullptr"></a>空值nullptr</h2><ul>
<li><p>以往用0或者NULL去表达空指针的问题：</p>
<p>C/C++的NULL宏是个被有很多潜在BUG的宏。因为有的库把其定义成整数0，有的定义成 (void*)0。在C的时代还好。但是在C++的时代，这就会引发很多问题</p>
</li>
<li><p>C++11使用nullptr关键字，是表达更准确，类型安全的空指针</p>
</li>
</ul>
<h2 id="指向常量的指针"><a href="#指向常量的指针" class="headerlink" title="指向常量的指针"></a>指向常量的指针</h2><p>不能通过指向常量的指针改变所指对象的值，但指针本身可以改变，可以指向另外的对象。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p1 = &amp;a; <span class="comment">//p1是指向常量的指针</span></div><div class="line"><span class="keyword">int</span> b;</div><div class="line">p1 = &amp;b; <span class="comment">//正确，p1本身的值可以改变</span></div><div class="line">*p1 = <span class="number">1</span>; <span class="comment">//编译时出错，不能通过p1改变所指的对象</span></div></pre></td></tr></table></figure>
<h2 id="指针类型的常量"><a href="#指针类型的常量" class="headerlink" title="指针类型的常量"></a>指针类型的常量</h2><p>若声明指针常量，则指针本身的值不能被改变。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a;</div><div class="line"><span class="keyword">int</span> * <span class="keyword">const</span> p2 = &amp;a;</div><div class="line">p2 = &amp;b; <span class="comment">//错误，p2是指针常量，值不能改变</span></div></pre></td></tr></table></figure>
<h2 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>) = f;</div><div class="line">   <span class="built_in">cout</span>&lt;&lt;p(<span class="number">1</span>, <span class="number">2</span>)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="智能指针"><a href="#智能指针" class="headerlink" title="智能指针"></a>智能指针</h2><p>显式管理内存在是能上有优势，但容易出错</p>
<p>C++11提供智能指针的数据类型，对垃圾回收技术提供了一些支持，实现一定程度的内存管理</p>
<ul>
<li>unique_ptr ：不允许多个指针共享资源，可以用标准库中的move函数转移指针</li>
<li>shared_ptr ：多个指针共享资源</li>
<li>weak_ptr ：可复制shared_ptr，但其构造或者释放对资源不产生影响</li>
</ul>
<h1 id="移动构造"><a href="#移动构造" class="headerlink" title="移动构造"></a>移动构造</h1><p>移动构造可以减少不必要的复制，带来性能上的提升</p>
<p>C++11之前，如果要将源对象的状态转移到目标对象只能通过复制。在某些情况下，我们没有必要复制对象——只需要移动它们</p>
<p>有可被利用的临时对象时，触发移动构造</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//函数返回含有指针成员的对象</span></div><div class="line"><span class="comment">//将要返回的局部对象转移到主调函数，省去了构造和删除临时对象的过程</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">IntNum</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">IntNum(<span class="keyword">int</span> x = <span class="number">0</span>) : xptr(<span class="keyword">new</span> <span class="keyword">int</span>(x))&#123; <span class="comment">//构造函数</span></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Calling constructor..."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line">IntNum(<span class="keyword">const</span> IntNum &amp; n) : xptr(<span class="keyword">new</span> <span class="keyword">int</span>(*n.xptr))&#123;<span class="comment">//复制构造函数</span></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Calling copy constructor..."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//&amp;&amp;是右值引用</span></div><div class="line"><span class="comment">//函数返回的临时变量是右值</span></div><div class="line">IntNum(IntNum &amp;&amp; n): xptr(n.xptr)&#123; <span class="comment">//移动构造函数</span></div><div class="line">	n.xptr = <span class="literal">nullptr</span>;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Calling move constructor..."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line">~IntNum()&#123; <span class="comment">//析构函数</span></div><div class="line">    <span class="keyword">delete</span> xptr;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructing..."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line"><span class="keyword">int</span> *xptr;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//返回值为IntNum类对象</span></div><div class="line"><span class="function">IntNum <span class="title">getNum</span><span class="params">()</span> </span>&#123;</div><div class="line">    IntNum a;</div><div class="line">    <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; getNum().getInt() &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">运行结果：</span></div><div class="line"><span class="comment">Calling constructor...</span></div><div class="line"><span class="comment">Calling move constructor...</span></div><div class="line"><span class="comment">Destructing...  //这里释放了nullptr</span></div><div class="line"><span class="comment">0</span></div><div class="line"><span class="comment">Destructing...</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<h2 id="左值和右值"><a href="#左值和右值" class="headerlink" title="左值和右值"></a>左值和右值</h2><p>左值和右值都是针对表达式而言的</p>
<p>左值是指表达式结束后依然存在的持久对象</p>
<p>右值指表达式结束时就不再存在的临时对象——显然右值不可以被取地址</p>
<h1 id="读入字符串"><a href="#读入字符串" class="headerlink" title="读入字符串"></a>读入字符串</h1><p>用cin的&gt;&gt;操作符输入字符串，会以空格作为分隔符，空格后的内容会在下一回输入时被读取</p>
<p>getline可以输入整行字符串（要包string头文件），例如：<code>getline(cin, s2);</code></p>
<p>输入字符串时，可以使用其它分隔符作为字符串结束的标志（例如逗号、分号），将分隔符作为getline的第3个参数即可，例如：<code>getline(cin, s2, &#39;,&#39;);</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</div><div class="line">        <span class="built_in">string</span> city, state;</div><div class="line">        getline(<span class="built_in">cin</span>, city, <span class="string">','</span>);</div><div class="line">        getline(<span class="built_in">cin</span>, state);</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"City:"</span> &lt;&lt; city &lt;&lt; “ State:<span class="string">" &lt;&lt; state &lt;&lt; endl;</span></div><div class="line"><span class="string">	&#125;</span></div><div class="line"><span class="string">	return 0;	</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">/*</span></div><div class="line"><span class="string">运行结果：</span></div><div class="line"><span class="string">Beijing,China</span></div><div class="line"><span class="string">City: Beijing State: China</span></div><div class="line"><span class="string">San Francisco,the United States</span></div><div class="line"><span class="string">City: San Francisco State: the United States</span></div><div class="line"><span class="string">*/</span></div></pre></td></tr></table></figure>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><h2 id="公有继承-public"><a href="#公有继承-public" class="headerlink" title="公有继承(public)"></a>公有继承(public)</h2><p>继承的访问控制</p>
<ul>
<li>基类的public和protected成员：访问属性在派生类中保持不变</li>
<li>基类的private成员：不可直接访问</li>
</ul>
<p>访问权限</p>
<ul>
<li>派生类中的成员函数：可以直接访问基类中的public和protected成员，但不能直接访问基类的private成员</li>
<li>通过派生类的对象：只能访问public成员</li>
</ul>
<h2 id="私有继承-private"><a href="#私有继承-private" class="headerlink" title="私有继承(private)"></a>私有继承(private)</h2><p>继承的访问控制</p>
<ul>
<li>基类的<strong>public</strong>和<strong>protected成员：都以private</strong>身份出现在派生类中</li>
<li>基类的private成员：<strong>不可直接访问</strong></li>
</ul>
<p>访问权限</p>
<ul>
<li>派生类中的成员函数：可以直接访问基类中的public和protected成员，但不能直接访问基类的private成员</li>
<li>通过派生类的对象：不能直接访问从基类继承的任何成员</li>
</ul>
<h2 id="保护继承-protected"><a href="#保护继承-protected" class="headerlink" title="保护继承(protected)"></a>保护继承(protected)</h2><p>继承的访问控制</p>
<ul>
<li>基类的<strong>public</strong>和<strong>protected成员：都以protected</strong>身份出现在派生类中</li>
<li>基类的<strong>private</strong>成员：<strong>不可直接访问</strong></li>
</ul>
<p>访问权限</p>
<ul>
<li>派生类中的成员函数：可以直接访问基类中的public和protected成员，但不能直接访问基类的private成员</li>
<li>通过派生类的对象：不能直接访问从基类继承的任何成员</li>
</ul>
<p>protected 成员的特点与作用</p>
<ul>
<li>对建立其所在类对象的模块来说，它与 private 成员的性质相同</li>
<li>对于其派生类来说，它与 public 成员的性质相同</li>
<li>既实现了数据隐藏，又方便继承，实现代码重用</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> a;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setB</span><span class="params">(<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> b;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span><span class="keyword">public</span> A, <span class="keyword">private</span> B&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setC</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> c;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">void</span> A::setA(<span class="keyword">int</span> x)&#123;</div><div class="line">    a = x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">void</span> B::setB(<span class="keyword">int</span> x)&#123;</div><div class="line">    b = x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">void</span> C::setC(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)&#123;</div><div class="line">    setA(x);</div><div class="line">    setB(y);</div><div class="line">    c = z;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</div><div class="line">    C obj;</div><div class="line">    obj.setA(<span class="number">5</span>); <span class="comment">// 正确</span></div><div class="line">    obj.setB(<span class="number">6</span>); <span class="comment">// 错误</span></div><div class="line">    obj.setC(<span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>); <span class="comment">// 正确</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="派生类的构造函数"><a href="#派生类的构造函数" class="headerlink" title="派生类的构造函数"></a>派生类的构造函数</h1><p>默认情况</p>
<ul>
<li>基类的构造函数不被继承</li>
<li>派生类需要定义自己的构造函数</li>
</ul>
<p>C++11规定</p>
<ul>
<li><p>可用using语句继承基类构造函数</p>
</li>
<li><p>但是只能初始化从基类继承的成员</p>
<p>派生类新增成员可以通过类内初始值进行初始化</p>
</li>
<li><p>语法形式：</p>
<p>using B::B;</p>
</li>
</ul>
<h2 id="多继承且有对象成员时派生的构造函数定义语法"><a href="#多继承且有对象成员时派生的构造函数定义语法" class="headerlink" title="多继承且有对象成员时派生的构造函数定义语法"></a>多继承且有对象成员时派生的构造函数定义语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">派生类名::派生类名(形参表):</div><div class="line">基类名1(参数), 基类名2(参数), ..., 基类名n(参数), </div><div class="line">本类成员（含对象成员）初始化列表</div><div class="line">&#123;</div><div class="line">        //其他初始化</div><div class="line">&#125;；</div></pre></td></tr></table></figure>
<h2 id="构造函数的执行顺序"><a href="#构造函数的执行顺序" class="headerlink" title="构造函数的执行顺序"></a>构造函数的执行顺序</h2><ol>
<li><p>调用基类构造函数</p>
<p>顺序按照它们被继承时声明的顺序（从左向右）</p>
</li>
<li><p>对初始化列表中的成员进行初始化</p>
<p>顺序按照它们在类中定义的顺序</p>
<p>对象成员初始化时自动调用其所属类的构造函数，由初始化列表提供参数</p>
</li>
<li><p>执行派生类的构造函数体中的内容</p>
</li>
</ol>
<h1 id="派生类复制构造函数"><a href="#派生类复制构造函数" class="headerlink" title="派生类复制构造函数"></a>派生类复制构造函数</h1><h2 id="派生类未定义复制构造函数的情况"><a href="#派生类未定义复制构造函数的情况" class="headerlink" title="派生类未定义复制构造函数的情况"></a>派生类未定义复制构造函数的情况</h2><p>编译器会在需要时生成一个隐含的复制构造函数</p>
<p>先调用基类的复制构造函数</p>
<p>再为派生类新增的成员执行复制</p>
<h2 id="派生类定义了复制构造函数的情况"><a href="#派生类定义了复制构造函数的情况" class="headerlink" title="派生类定义了复制构造函数的情况"></a>派生类定义了复制构造函数的情况</h2><p>一般都要为基类的复制构造函数传递参数</p>
<p>复制构造函数只能接受一个参数，既用来初始化派生类定义的成员，也将被传递给基类的复制构造函数</p>
<p>基类的复制构造函数形参类型是基类对象的引用，实参可以是派生类对象的引用</p>
<p>例如: <code>C::C(const C &amp;c1): B(c1) {…}</code></p>
<h1 id="派生类的析构函数"><a href="#派生类的析构函数" class="headerlink" title="派生类的析构函数"></a>派生类的析构函数</h1><p>析构函数不被继承，派生类如果需要，要自行声明析构函数</p>
<p>声明方法与无继承关系时类的析构函数相同</p>
<p>不需要显式地调用基类的析构函数，系统会自动隐式调用</p>
<p>先执行派生类析构函数的函数体，再调用基类的析构函数</p>
<h1 id="访问从基类继承的成员"><a href="#访问从基类继承的成员" class="headerlink" title="访问从基类继承的成员"></a>访问从基类继承的成员</h1><p>当派生类与基类中有相同成员时：</p>
<ul>
<li>若未特别限定，则通过派生类对象使用的是派生类中的同名成员</li>
<li>如要通过派生类对象访问基类中被隐藏的同名成员，应使用基类名和作用域操作符（::）来限定</li>
</ul>
<p>如果从不同基类继承了同名成员，但是在派生类中没有定义同名成员，“<strong>派生类对象名或引用名.成员名</strong>”、“<strong>派生类指针-&gt;成员名</strong>”访问成员存在二义性问题</p>
<ul>
<li>解决方式：用类名限定</li>
</ul>
<h1 id="虚基类"><a href="#虚基类" class="headerlink" title="虚基类"></a>虚基类</h1><p>需要解决的问题</p>
<ul>
<li>当派生类从多个基类派生，而这些基类又共同基类，则在访问此共同基类中的成员时，将产生冗余，并有可能因冗余带来不一致性</li>
</ul>
<p>虚基类声明</p>
<ul>
<li>以virtual说明基类继承方式</li>
<li>例：<code>class B1:virtual public B</code></li>
</ul>
<p>作用</p>
<ul>
<li>主要用来解决多继承时可能发生的对同一基类继承多次而产生的二义性问题</li>
<li>为最远的派生类提供唯一的基类成员，而不重复产生多次复制</li>
</ul>
<p>注意：</p>
<ul>
<li>在第一级继承时就要将共同基类设计为虚基类</li>
</ul>
<h2 id="虚基类及其派生类构造函数"><a href="#虚基类及其派生类构造函数" class="headerlink" title="虚基类及其派生类构造函数"></a>虚基类及其派生类构造函数</h2><p>建立对象时所指定的类称为<strong>最远派生类</strong></p>
<p>虚基类的成员是由最远派生类的构造函数通过调用虚基类的构造函数进行初始化的</p>
<p>在整个继承结构中，直接或间接继承虚基类的所有派生类，都必须在构造函数的成员初始化表中为虚基类的构造函数列出参数。如果未列出，则表示调用该虚基类的默认构造函数</p>
<p>在建立对象时，只有最远派生类的构造函数调用虚基类的构造函数，其他类对虚基类构造函数的调用被忽略</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base0</span> &#123;</span>   </div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Base0(<span class="keyword">int</span> var) : var0(var) &#123; &#125;</div><div class="line">    <span class="keyword">int</span> var0;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun0</span><span class="params">()</span> </span>&#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Member of Base0"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base1</span>:</span> <span class="keyword">virtual</span> <span class="keyword">public</span> Base0 &#123;</div><div class="line"><span class="keyword">public</span>: </div><div class="line">    Base1(<span class="keyword">int</span> var) : Base0(var) &#123; &#125;</div><div class="line">    <span class="keyword">int</span> var1;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base2</span>:</span> <span class="keyword">virtual</span> <span class="keyword">public</span> Base0 &#123; </div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Base2(<span class="keyword">int</span> var) : Base0(var) &#123; &#125;</div><div class="line">    <span class="keyword">int</span> var2;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base1, <span class="keyword">public</span> Base2 &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Derived(<span class="keyword">int</span> var) : Base0(var), Base1(var), Base2(var) &#123; &#125;</div><div class="line">    <span class="keyword">int</span> var;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span></div><div class="line"><span class="function">   </span>&#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Member of Derived"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;    <span class="comment">//程序主函数</span></div><div class="line">    <span class="function">Derived <span class="title">d</span><span class="params">(<span class="number">1</span>)</span></span>;</div><div class="line">    d.var0 = <span class="number">2</span>; <span class="comment">//直接访问虚基类的数据成员</span></div><div class="line">    d.fun0();   <span class="comment">//直接访问虚基类的函数成员</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h1><h2 id="双目运算符重载规则"><a href="#双目运算符重载规则" class="headerlink" title="双目运算符重载规则"></a>双目运算符重载规则</h2><p>如果要重载 B 为类成员函数，使之能够实现表达式 oprd1 B oprd2，其中 oprd1 为A 类对象，则 B 应被重载为 A 类的成员函数，形参类型应该是 oprd2 所属的类型</p>
<p>经重载后，表达式 oprd1 B oprd2 相当于 oprd1.operator B(oprd2)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Complex(<span class="keyword">double</span> r = <span class="number">0.0</span>, <span class="keyword">double</span> i = <span class="number">0.0</span>) : real(r), imag(i) &#123; &#125;</div><div class="line">    <span class="comment">//运算符+重载成员函数</span></div><div class="line">    Complex <span class="keyword">operator</span> + (<span class="keyword">const</span> Complex &amp;c2) <span class="keyword">const</span>;</div><div class="line">    <span class="comment">//运算符-重载成员函数</span></div><div class="line">    Complex <span class="keyword">operator</span> - (<span class="keyword">const</span> Complex &amp;c2) <span class="keyword">const</span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span></span>;   <span class="comment">//输出复数</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">double</span> real;    <span class="comment">//复数实部</span></div><div class="line">    <span class="keyword">double</span> imag;    <span class="comment">//复数虚部</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//复数类加减法运算重载为成员函数</span></div><div class="line">Complex Complex::<span class="keyword">operator</span> + (<span class="keyword">const</span> Complex &amp;c2) <span class="keyword">const</span>&#123;</div><div class="line">  <span class="comment">//创建一个临时无名对象作为返回值 </span></div><div class="line">  <span class="keyword">return</span> Complex(real+c2.real, imag+c2.imag); </div><div class="line">&#125;</div><div class="line"></div><div class="line">Complex Complex::<span class="keyword">operator</span> - (<span class="keyword">const</span> Complex &amp;c2) <span class="keyword">const</span>&#123;</div><div class="line"> <span class="comment">//创建一个临时无名对象作为返回值</span></div><div class="line">    <span class="keyword">return</span> Complex(real-c2.real, imag-c2.imag); </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Complex::display() <span class="keyword">const</span> &#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"("</span>&lt;&lt;real&lt;&lt;<span class="string">", "</span>&lt;&lt;imag&lt;&lt;<span class="string">")"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//复数类加减法运算重载为成员函数</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    Complex c1(5, 4), c2(2, 10), c3;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c1 = "</span>; c1.display();</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c2 = "</span>; c2.display();</div><div class="line">    c3 = c1 - c2;   <span class="comment">//使用重载运算符完成复数减法</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c3 = c1 - c2 = "</span>; c3.display();</div><div class="line">    c3 = c1 + c2;   <span class="comment">//使用重载运算符完成复数加法</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c3 = c1 + c2 = "</span>; c3.display();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="前置单目运算符重载规则"><a href="#前置单目运算符重载规则" class="headerlink" title="前置单目运算符重载规则"></a>前置单目运算符重载规则</h2><p>如果要重载 U 为类成员函数，使之能够实现表达式 U oprd，其中 oprd 为A类对象，则 U 应被重载为 A 类的成员函数，无形参。</p>
<p>经重载后，表达式 U oprd 相当于 oprd.operator U()</p>
<h2 id="后置单目运算符-和–重载规则"><a href="#后置单目运算符-和–重载规则" class="headerlink" title="后置单目运算符 ++和–重载规则"></a>后置单目运算符 ++和–重载规则</h2><p>如果要重载 ++或–为类成员函数，使之能够实现表达式 oprd++ 或 oprd– ，其中 oprd 为A类对象，则 ++或– 应被重载为 A 类的成员函数，且具有一个 int 类型形参。</p>
<p>经重载后，表达式 oprd++ 相当于 oprd.operator ++(0)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> &#123;</span><span class="comment">//时钟类定义</span></div><div class="line"><span class="keyword">public</span>: </div><div class="line">    Clock(<span class="keyword">int</span> hour = <span class="number">0</span>, <span class="keyword">int</span> minute = <span class="number">0</span>, <span class="keyword">int</span> second = <span class="number">0</span>);</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showTime</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">  <span class="comment">//前置单目运算符重载</span></div><div class="line">    Clock&amp; <span class="keyword">operator</span> ++ ();</div><div class="line">  <span class="comment">//后置单目运算符重载</span></div><div class="line">    Clock <span class="keyword">operator</span> ++ (<span class="keyword">int</span>);    </div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> hour, minute, second;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Clock::Clock(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute, <span class="keyword">int</span> second) &#123;    </div><div class="line">    <span class="keyword">if</span> (<span class="number">0</span> &lt;= hour &amp;&amp; hour &lt; <span class="number">24</span> &amp;&amp; <span class="number">0</span> &lt;= minute &amp;&amp; minute &lt; <span class="number">60</span></div><div class="line">        &amp;&amp; <span class="number">0</span> &lt;= second &amp;&amp; second &lt; <span class="number">60</span>) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;hour = hour;</div><div class="line">        <span class="keyword">this</span>-&gt;minute = minute;</div><div class="line">        <span class="keyword">this</span>-&gt;second = second;</div><div class="line">    &#125; <span class="keyword">else</span></div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Time error!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">void</span> Clock::showTime() <span class="keyword">const</span> &#123;  <span class="comment">//显示时间</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; hour &lt;&lt; <span class="string">":"</span> &lt;&lt; minute &lt;&lt; <span class="string">":"</span> &lt;&lt; second &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//重载前置++和后置++为时钟类成员函数</span></div><div class="line">Clock &amp; Clock::<span class="keyword">operator</span> ++ () &#123; </div><div class="line">    second++;</div><div class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</div><div class="line">        second -= <span class="number">60</span>;  minute++;</div><div class="line">        <span class="keyword">if</span> (minute &gt;= <span class="number">60</span>) &#123;</div><div class="line">          minute -= <span class="number">60</span>; hour = (hour + <span class="number">1</span>) % <span class="number">24</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Clock Clock::<span class="keyword">operator</span> ++ (<span class="keyword">int</span>) &#123;</div><div class="line">    <span class="comment">//注意形参表中的整型参数</span></div><div class="line">    Clock old = *<span class="keyword">this</span>;</div><div class="line">    ++(*<span class="keyword">this</span>);  <span class="comment">//调用前置“++”运算符</span></div><div class="line">    <span class="keyword">return</span> old;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="function">Clock <span class="title">myClock</span><span class="params">(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>)</span></span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"First time output: "</span>;</div><div class="line">    myClock.showTime();</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Show myClock++:    "</span>;</div><div class="line">    (myClock++).showTime();</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Show ++myClock:    "</span>;</div><div class="line">    (++myClock).showTime();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="运算符重载为非成员函数"><a href="#运算符重载为非成员函数" class="headerlink" title="运算符重载为非成员函数"></a>运算符重载为非成员函数</h2><p>有些运算符不能重载为成员函数，例如二元运算符的左操作数不是对象，或者是不能由我们重载运算符的对象</p>
<h3 id="运算符重载为非成员函数的规则"><a href="#运算符重载为非成员函数的规则" class="headerlink" title="运算符重载为非成员函数的规则"></a>运算符重载为非成员函数的规则</h3><ul>
<li>函数的形参代表依自左至右次序排列的各操作数</li>
<li>参数个数=原操作数个数（后置++、–除外）</li>
<li>至少应该有一个自定义类型的参数</li>
<li>后置单目运算符 ++和–的重载函数，形参列表中要增加一个int，但不必写形参名</li>
<li>如果在运算符的重载函数中需要操作某类对象的私有成员，可以将此函数声明为该类的友元</li>
<li>双目运算符 B重载后，表达式oprd1 B oprd2等同于operator B(oprd1,oprd2 )</li>
<li>前置单目运算符 B重载后，表达式 B oprd等同于operator B(oprd )</li>
<li>后置单目运算符 ++和–重载后，表达式 oprd B等同于operator B(oprd,0 )</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重载Complex的加减法和“&lt;&lt;”运算符为非成员函数</span></div><div class="line"><span class="comment">//将+、-（双目）重载为非成员函数，并将其声明为复数类的友元，两个操作数都是复数类的常引用。 • 将&lt;&lt;（双目）重载为非成员函数，并将其声明为复数类的友元，它的左操作数是std::ostream引用，右操作数为复数类的常引用，返回std::ostream引用</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">    Complex(<span class="keyword">double</span> r = <span class="number">0.0</span>, <span class="keyword">double</span> i = <span class="number">0.0</span>) : real(r), imag(i) &#123; &#125;  </div><div class="line">    <span class="keyword">friend</span> Complex <span class="keyword">operator</span>+(<span class="keyword">const</span> Complex &amp;c1, <span class="keyword">const</span> Complex &amp;c2);</div><div class="line">    <span class="keyword">friend</span> Complex <span class="keyword">operator</span>-(<span class="keyword">const</span> Complex &amp;c1, <span class="keyword">const</span> Complex &amp;c2);</div><div class="line">    <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="keyword">const</span> Complex &amp;c);</div><div class="line">    <span class="keyword">private</span>:    </div><div class="line">    <span class="keyword">double</span> real;  <span class="comment">//复数实部</span></div><div class="line">    <span class="keyword">double</span> imag;  <span class="comment">//复数虚部</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">Complex <span class="keyword">operator</span>+(<span class="keyword">const</span> Complex &amp;c1, <span class="keyword">const</span> Complex &amp;c2)&#123;</div><div class="line">    <span class="keyword">return</span> Complex(c1.real+c2.real, c1.imag+c2.imag); </div><div class="line">&#125;</div><div class="line">Complex <span class="keyword">operator</span>-(<span class="keyword">const</span> Complex &amp;c1, <span class="keyword">const</span> Complex &amp;c2)&#123;</div><div class="line">    <span class="keyword">return</span> Complex(c1.real-c2.real, c1.imag-c2.imag); </div><div class="line">&#125;</div><div class="line"></div><div class="line">ostream &amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="keyword">const</span> Complex &amp;c)&#123;</div><div class="line">    out &lt;&lt; <span class="string">"("</span> &lt;&lt; c.real &lt;&lt; <span class="string">", "</span> &lt;&lt; c.imag &lt;&lt; <span class="string">")"</span>;</div><div class="line">    <span class="keyword">return</span> out;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;    </div><div class="line">    Complex c1(5, 4), c2(2, 10), c3;    </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c1 = "</span> &lt;&lt; c1 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c2 = "</span> &lt;&lt; c2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    c3 = c1 - c2;   <span class="comment">//使用重载运算符完成复数减法</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c3 = c1 - c2 = "</span> &lt;&lt; c3 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    c3 = c1 + c2;   <span class="comment">//使用重载运算符完成复数加法</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"c3 = c1 + c2 = "</span> &lt;&lt; c3 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="虚函数"><a href="#虚函数" class="headerlink" title="虚函数"></a>虚函数</h1><ul>
<li>用virtual关键字说明的函数</li>
<li>虚函数是实现运行时多态性基础</li>
<li>C++中的虚函数是动态绑定的函数</li>
<li>虚函数必须是非静态的成员函数，虚函数经过派生之后，就可以实现运行过程中的多态</li>
<li>一般成员函数可以是虚函数</li>
<li>构造函数不能是虚函数</li>
<li>析构函数可以是虚函数</li>
<li>虚函数声明只能出现在类定义中的函数原型声明中，而不能在成员函数实现的时候</li>
<li>在派生类中可以对基类中的成员函数进行覆盖</li>
<li>虚函数一般不声明为内联函数，因为对虚函数的调用需要动态绑定，而对内联函数的处理是静态的</li>
</ul>
<h2 id="virtual-关键字"><a href="#virtual-关键字" class="headerlink" title="virtual 关键字"></a>virtual 关键字</h2><ul>
<li>派生类可以不显式地用virtual声明虚函数，这时系统就会用以下规则来判断派生类的一个函数成员是不是虚函数：<ul>
<li>该函数是否与基类的虚函数有相同的名称、参数个数及对应参数类型</li>
<li>该函数是否与基类的虚函数有相同的返回值或者满足类型兼容规则的指针、引用型的返回值</li>
</ul>
</li>
<li>如果从名称、参数及返回值三个方面检查之后，派生类的函数满足上述条件，就会自动确定为虚函数。这时，派生类的虚函数便覆盖了基类的虚函数</li>
<li>派生类中的虚函数还会隐藏基类中同名函数的所有其它重载形式</li>
<li>一般习惯于在派生类的函数中也使用virtual关键字，以增加程序的可读性</li>
</ul>
<h2 id="虚析构函数"><a href="#虚析构函数" class="headerlink" title="虚析构函数"></a>虚析构函数</h2><p>为什么需要虚析构函数？ - 可能通过基类指针删除派生类对象； - 如果你打算允许其他人通过基类指针调用对象的析构函数（通过delete这样做是正常的），就需要让基类的析构函数成为虚函数，否则执行delete的结果是不确定的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">virtual</span> ~Base();</div><div class="line">&#125;;</div><div class="line">Base::~Base()</div><div class="line">&#123;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"Base "</span>;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">virtual</span> ~Derived();</div><div class="line">&#125;;</div><div class="line">Derived::~Derived()&#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Derived "</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">(Base *b)</span></span>&#123;</div><div class="line">    <span class="keyword">delete</span> b;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</div><div class="line">    Base *b = <span class="keyword">new</span> Derived();</div><div class="line">    fun(b);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="虚表与动态绑定"><a href="#虚表与动态绑定" class="headerlink" title="虚表与动态绑定"></a>虚表与动态绑定</h2><p>虚表</p>
<ul>
<li>每个多态类有一个虚表（virtual table）</li>
<li>虚表中有当前类的各个虚函数的入口地址</li>
<li>每个对象有一个指向当前类的虚表的指针（虚指针vptr）</li>
</ul>
<p>动态绑定的实现</p>
<ul>
<li>构造函数中为对象的虚指针赋值</li>
<li>通过多态类型的指针或引用调用成员函数时，通过虚指针找到虚表，进而找到所调用的虚函数的入口地址</li>
<li>通过该入口地址调用虚函数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//在32位机器上，sizeof(A)为：4；在64位机器上，sizeof(A)为：8</span></div><div class="line"><span class="comment">//因为A中含有一个指向虚表的指针，在32位机器上，指针占4个字节；在64位机器上，指针占8个字节</span></div></pre></td></tr></table></figure>
<h1 id="抽象类和纯虚函数"><a href="#抽象类和纯虚函数" class="headerlink" title="抽象类和纯虚函数"></a>抽象类和纯虚函数</h1><p>纯虚函数是一个在基类中声明的虚函数，它在该基类中没有定义具体的操作内容，要求各派生类根据实际需要定义自己的版本，纯虚函数的声明格式为：virtual 函数类型 函数名(参数表) = 0;</p>
<p>带有纯虚函数的类称为抽象类</p>
<h2 id="抽象类作用"><a href="#抽象类作用" class="headerlink" title="抽象类作用"></a>抽象类作用</h2><ul>
<li>抽象类为抽象和设计的目的而声明</li>
<li>将有关的数据和行为组织在一个继承层次结构中，保证派生类具有要求的行为</li>
<li>对于暂时无法实现的函数，可以声明为纯虚函数，留给派生类去实现</li>
</ul>
<p>注意：</p>
<ul>
<li>抽象类只能作为基类来使用。</li>
<li>不能定义抽象类的对象。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base1</span> &#123;</span> </div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>;   <span class="comment">//纯虚函数</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base2</span>:</span> <span class="keyword">public</span> Base1 &#123; </div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">//覆盖基类的虚函数</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">void</span> Base2::display() <span class="keyword">const</span> &#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Base2::display()"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base2 &#123; </div><div class="line"><span class="keyword">public</span>:</div><div class="line">     <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">//覆盖基类的虚函数</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">void</span> Derived::display() <span class="keyword">const</span> &#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Derived::display()"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125; </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">(Base1 *ptr)</span> </span>&#123; </div><div class="line">    ptr-&gt;display(); </div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;    </div><div class="line">    Base2 base2;    </div><div class="line">    Derived derived;    </div><div class="line">    fun(&amp;base2);    </div><div class="line">    fun(&amp;derived);  </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="override"><a href="#override" class="headerlink" title="override"></a>override</h1><p>C++11 引入显式函数覆盖，在编译期而非运行期捕获此类错误。 - 在虚函数显式重载中运用，编译器会检查基类是否存在一虚拟函数，与派生类中带有声明override的虚拟函数，有相同的函数签名（signature）；若不存在，则会回报错误</p>
<ul>
<li>多态行为的基础：基类声明虚函数，继承类声明一个函数覆盖该虚函数</li>
<li>覆盖要求： 函数签名（signatture）完全一致</li>
<li>函数签名包括：函数名 参数列表 const</li>
</ul>
<h1 id="final"><a href="#final" class="headerlink" title="final"></a>final</h1><p>C++11提供final，用来避免类被继承，或是基类的函数被改写 例： </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base1</span> <span class="title">final</span> &#123;</span> &#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Derived1</span> :</span> Base1 &#123; &#125;; <span class="comment">// 编译错误：Base1为final，不允许被继承</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base2</span> &#123;</span> <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> final</span>; &#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Derived2</span> :</span> Base2 &#123; <span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>; <span class="comment">// 编译错误：Base2::f 为final，不允许被覆盖 &#125;;</span></div></pre></td></tr></table></figure>
<h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><h2 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h2><p>语法形式：</p>
<p>template &lt;模板参数表&gt;</p>
<p>模板参数表的内容：</p>
<ul>
<li>类型参数：class（或typename） 标识符</li>
<li>常量参数：类型说明符 标识符</li>
<li>模板参数：template &lt;参数表&gt; class标识符</li>
</ul>
<p>注意：</p>
<ul>
<li>一个函数模板并非自动可以处理所有类型的数据</li>
<li>只有能够进行函数模板中运算的类型，可以作为类型实参</li>
<li>自定义的类，需要重载模板中的运算符，才能作为类型实参</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;  //定义函数模板</span></div><div class="line"><span class="class"><span class="title">void</span> <span class="title">outputArray</span>(<span class="title">const</span> <span class="title">T</span> *<span class="title">array</span>, <span class="title">int</span> <span class="title">count</span>) &#123;</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">array</span>[i] &lt;&lt; <span class="string">" "</span>; <span class="comment">//如果数组元素是类的对象，需要该对象所属类重载了流插入运算符“&lt;&lt;”</span></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;     </div><div class="line">    <span class="keyword">const</span> <span class="keyword">int</span> A_COUNT = <span class="number">8</span>, B_COUNT = <span class="number">8</span>, C_COUNT = <span class="number">20</span>;</div><div class="line">    <span class="keyword">int</span> a [A_COUNT] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;;</div><div class="line">    <span class="keyword">double</span> b[B_COUNT] = &#123; <span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span>, <span class="number">5.5</span>, <span class="number">6.6</span>, <span class="number">7.7</span>, <span class="number">8.8</span> &#125;;</div><div class="line">    <span class="keyword">char</span> c[C_COUNT] = <span class="string">"Welcome!"</span>;</div><div class="line"></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">" a array contains:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    outputArray(a, A_COUNT);    </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">" b array contains:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    outputArray(b, B_COUNT);    </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">" c array contains:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    outputArray(c, C_COUNT);    </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h2><p>使用类模板使用户可以为类声明一种模式，使得类中的某些数据成员、某些成员函数的参数、某些成员函数的返回值，能取任意类型（包括基本类型的和用户自定义类型）</p>
<p>类模板 template &lt;模板参数表&gt; class 类名 {类成员声明};</p>
<p>如果需要在类模板以外定义其成员函数，则要采用以下的形式： template &lt;模板参数表&gt; 类型名 类名&lt;模板参数标识符列表&gt;::函数名（参数表）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></div><div class="line">  <span class="keyword">int</span> id;       <span class="comment">//学号</span></div><div class="line">  <span class="keyword">float</span> gpa;    <span class="comment">//平均分</span></div><div class="line">&#125;; </div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">class</span> <span class="title">Store</span> &#123;</span><span class="comment">//类模板：实现对任意类型数据进行存取</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    T item; <span class="comment">// item用于存放任意类型的数据</span></div><div class="line">    <span class="keyword">bool</span> haveValue;  <span class="comment">// haveValue标记item是否已被存入内容</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Store();</div><div class="line">    <span class="function">T &amp;<span class="title">getElem</span><span class="params">()</span></span>;   <span class="comment">//提取数据函数</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">putElem</span><span class="params">(<span class="keyword">const</span> T &amp;x)</span></span>;  <span class="comment">//存入数据函数</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;  </span></div><div class="line"><span class="class"><span class="title">Store</span>&lt;T&gt;:</span>:Store(): haveValue(<span class="literal">false</span>) &#123; &#125; </div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">T</span> &amp;<span class="title">Store</span>&lt;T&gt;:</span>:getElem() &#123;</div><div class="line">    <span class="comment">//如试图提取未初始化的数据，则终止程序</span></div><div class="line">    <span class="keyword">if</span> (!haveValue) &#123;   </div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"No item present!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);    <span class="comment">//使程序完全退出，返回到操作系统。</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> item;        <span class="comment">// 返回item中存放的数据 </span></div><div class="line">&#125;</div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">void</span> <span class="title">Store</span>&lt;T&gt;:</span>:putElem(<span class="keyword">const</span> T &amp;x) &#123;</div><div class="line">    <span class="comment">// 将haveValue 置为true，表示item中已存入数值   </span></div><div class="line">    haveValue = <span class="literal">true</span>;   </div><div class="line">    item = x;           <span class="comment">// 将x值存入item</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    Store&lt;<span class="keyword">int</span>&gt; s1, s2;  </div><div class="line">    s1.putElem(<span class="number">3</span>);  </div><div class="line">    s2.putElem(<span class="number">-7</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; s1.getElem() &lt;&lt; <span class="string">"  "</span> &lt;&lt; s2.getElem() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    Student g = &#123; <span class="number">1000</span>, <span class="number">23</span> &#125;;</div><div class="line">    Store&lt;Student&gt; s3;</div><div class="line">    s3.putElem(g); </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The student id is "</span> &lt;&lt; s3.getElem().id &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    Store&lt;<span class="keyword">double</span>&gt; d;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Retrieving object D... "</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; d.getElem() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">   <span class="comment">//d未初始化，执行函数D.getElement()时导致程序终止</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="数组类模板"><a href="#数组类模板" class="headerlink" title="数组类模板"></a>数组类模板</h2><p>自己实现一个动态数组</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ARRAY_H</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ARRAY_H</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;  //数组类模板定义</span></div><div class="line"><span class="class"><span class="title">class</span> <span class="title">Array</span> &#123;</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    T* <span class="built_in">list</span>;        <span class="comment">//用于存放动态分配的数组内存首地址</span></div><div class="line">    <span class="keyword">int</span> size;       <span class="comment">//数组大小（元素个数）</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Array(<span class="keyword">int</span> sz = <span class="number">50</span>);     <span class="comment">//构造函数</span></div><div class="line">    Array(<span class="keyword">const</span> Array&lt;T&gt; &amp;a);   <span class="comment">//复制构造函数</span></div><div class="line">    ~Array();           <span class="comment">//析构函数</span></div><div class="line">    Array&lt;T&gt; &amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> Array&lt;T&gt; &amp;rhs);    <span class="comment">//重载"=“</span></div><div class="line">    T &amp; <span class="keyword">operator</span> [] (<span class="keyword">int</span> i); <span class="comment">//重载"[]”</span></div><div class="line">    <span class="keyword">const</span> T &amp; <span class="keyword">operator</span> [] (<span class="keyword">int</span> i) <span class="keyword">const</span>;     <span class="comment">//重载"[]”常函数</span></div><div class="line">    <span class="keyword">operator</span> T * ();        <span class="comment">//重载到T*类型的转换</span></div><div class="line">    <span class="keyword">operator</span> <span class="keyword">const</span> T * () <span class="keyword">const</span>;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> <span class="keyword">const</span></span>;        <span class="comment">//取数组的大小</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> sz)</span></span>;        <span class="comment">//修改数组的大小</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; <span class="title">Array</span>&lt;T&gt;:</span>:Array(<span class="keyword">int</span> sz) &#123;<span class="comment">//构造函数</span></div><div class="line">    assert(sz &gt;= <span class="number">0</span>);<span class="comment">//sz为数组大小（元素个数），应当非负</span></div><div class="line">    size = sz;  <span class="comment">// 将元素个数赋值给变量size</span></div><div class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> T [size];    <span class="comment">//动态分配size个T类型的元素空间</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; <span class="title">Array</span>&lt;T&gt;:</span>:~Array() &#123; <span class="comment">//析构函数</span></div><div class="line">    <span class="keyword">delete</span> [] <span class="built_in">list</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; </span></div><div class="line"><span class="class"><span class="title">Array</span>&lt;T&gt;:</span>:Array(<span class="keyword">const</span> Array&lt;T&gt; &amp;a) &#123;    <span class="comment">//复制构造函数</span></div><div class="line">    size = a.size;     <span class="comment">//从对象x取得数组大小，并赋值给当前对象的成员</span></div><div class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> T[size]; <span class="comment">// 动态分配n个T类型的元素空间</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)     <span class="comment">//从对象X复制数组元素到本对象 </span></div><div class="line">        <span class="built_in">list</span>[i] = a.<span class="built_in">list</span>[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//重载"="运算符，将对象rhs赋值给本对象。实现对象之间的整体赋值</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">Array</span>&lt;T&gt; &amp;<span class="title">Array</span>&lt;T&gt;:</span>:<span class="keyword">operator</span> = (<span class="keyword">const</span> Array&lt;T&gt;&amp; rhs) &#123;</div><div class="line">    <span class="keyword">if</span> (&amp;rhs != <span class="keyword">this</span>) &#123;</div><div class="line">		<span class="comment">//如果本对象中数组大小与rhs不同，则删除数组原有内存，然后重新分配</span></div><div class="line">        <span class="keyword">if</span> (size != rhs.size) &#123;</div><div class="line">            <span class="keyword">delete</span> [] <span class="built_in">list</span>; <span class="comment">//删除数组原有内存</span></div><div class="line">            size = rhs.size;    <span class="comment">//设置本对象的数组大小</span></div><div class="line">            <span class="built_in">list</span> = <span class="keyword">new</span> T[size];  <span class="comment">//重新分配size个元素的内存</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">//从对象X复制数组元素到本对象  </span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</div><div class="line">            <span class="built_in">list</span>[i] = rhs.<span class="built_in">list</span>[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;   <span class="comment">//返回当前对象的引用</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//重载下标运算符，实现与普通数组一样通过下标访问元素，具有越界检查功能</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">T</span> &amp;<span class="title">Array</span>&lt;T&gt;:</span>:<span class="keyword">operator</span>[] (<span class="keyword">int</span> n) &#123;</div><div class="line">    assert(n &gt;= <span class="number">0</span> &amp;&amp; n &lt; size);  <span class="comment">//检查下标是否越界</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">list</span>[n];       <span class="comment">//返回下标为n的数组元素</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">const</span> <span class="title">T</span> &amp;<span class="title">Array</span>&lt;T&gt;:</span>:<span class="keyword">operator</span>[] (<span class="keyword">int</span> n) <span class="keyword">const</span> &#123;</div><div class="line">    assert(n &gt;= <span class="number">0</span> &amp;&amp; n &lt; size);  <span class="comment">//检查下标是否越界</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">list</span>[n];       <span class="comment">//返回下标为n的数组元素</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//重载指针转换运算符，将Array类的对象名转换为T类型的指针</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">Array</span>&lt;T&gt;:</span>:<span class="keyword">operator</span> T * () &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">list</span>;    <span class="comment">//返回当前对象中私有数组的首地址</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//取当前数组的大小</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">int</span> <span class="title">Array</span>&lt;T&gt;:</span>:getSize() <span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> size;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 将数组大小修改为sz</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">void</span> <span class="title">Array</span>&lt;T&gt;:</span>:resize(<span class="keyword">int</span> sz) &#123;</div><div class="line">    assert(sz &gt;= <span class="number">0</span>);    <span class="comment">//检查sz是否非负</span></div><div class="line">    <span class="keyword">if</span> (sz == size) <span class="comment">//如果指定的大小与原有大小一样，什么也不做</span></div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    T* newList = <span class="keyword">new</span> T [sz];    <span class="comment">//申请新的数组内存</span></div><div class="line">    <span class="keyword">int</span> n = (sz &lt; size) ? sz : size;<span class="comment">//将sz与size中较小的一个赋值给n</span></div><div class="line">    <span class="comment">//将原有数组中前n个元素复制到新数组中</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">        newList[i] = <span class="built_in">list</span>[i];</div><div class="line">    <span class="keyword">delete</span>[] <span class="built_in">list</span>;      <span class="comment">//删除原数组</span></div><div class="line">    <span class="built_in">list</span> = newList; <span class="comment">// 使list指向新数组</span></div><div class="line">    size = sz;  <span class="comment">//更新size</span></div><div class="line">&#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>  <span class="comment">//ARRAY_H</span></span></div></pre></td></tr></table></figure>
<h1 id="泛型程序设计与STL"><a href="#泛型程序设计与STL" class="headerlink" title="泛型程序设计与STL"></a>泛型程序设计与STL</h1><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>迭代器是算法和容器的桥梁</p>
<ul>
<li>迭代器用作访问容器中的元素</li>
<li>算法不直接操作容器中的数据，而是通过迭代器间接操作</li>
</ul>
<p>算法和容器独立</p>
<ul>
<li>增加新的算法，无需影响容器的实现</li>
<li>增加新的容器，原有的算法也能适用</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//将来自输入迭代器的n个T类型的数值排序，将结果通过输出迭代器result输出</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">class</span> <span class="title">InputIterator</span>, <span class="title">class</span> <span class="title">OutputIterator</span>&gt;</span></div><div class="line"><span class="class"><span class="title">void</span> <span class="title">mySort</span>(<span class="title">InputIterator</span> <span class="title">first</span>, <span class="title">InputIterator</span> <span class="title">last</span>, <span class="title">OutputIterator</span> <span class="title">result</span>) &#123;</span></div><div class="line">    <span class="comment">//通过输入迭代器将输入数据存入向量容器s中</span></div><div class="line">    <span class="built_in">vector</span>&lt;T&gt; s;</div><div class="line">    <span class="keyword">for</span> (;first != last; ++first)</div><div class="line">        s.push_back(*first);</div><div class="line">    <span class="comment">//对s进行排序，sort函数的参数必须是随机访问迭代器</span></div><div class="line">    sort(s.begin(), s.end());  </div><div class="line">    copy(s.begin(), s.end(), result);   <span class="comment">//将s序列通过输出迭代器输出</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//将s数组的内容排序后输出</span></div><div class="line">    <span class="keyword">double</span> a[<span class="number">5</span>] = &#123; <span class="number">1.2</span>, <span class="number">2.4</span>, <span class="number">0.8</span>, <span class="number">3.3</span>, <span class="number">3.2</span> &#125;;</div><div class="line">    mySort&lt;<span class="keyword">double</span>&gt;(a, a + <span class="number">5</span>, ostream_iterator&lt;<span class="keyword">double</span>&gt;(<span class="built_in">cout</span>, <span class="string">" "</span>));</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="comment">//从标准输入读入若干个整数，将排序后的结果输出</span></div><div class="line">    mySort&lt;<span class="keyword">int</span>&gt;(istream_iterator&lt;<span class="keyword">int</span>&gt;(<span class="built_in">cin</span>), istream_iterator&lt;<span class="keyword">int</span>&gt;(), ostream_iterator&lt;<span class="keyword">int</span>&gt;(<span class="built_in">cout</span>, <span class="string">" "</span>));</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="逆向迭代器"><a href="#逆向迭代器" class="headerlink" title="逆向迭代器"></a>逆向迭代器</h2><ul>
<li>rbegin() ：指向容器尾的逆向迭代器</li>
<li>rend()：指向容器首的逆向迭代器</li>
</ul>
<p>逆向迭代器的类型名的表示方式如下：</p>
<ul>
<li>S::reverse_iterator：逆向迭代器类型</li>
<li>S::const_reverse_iterator：逆向常迭代器类型</li>
</ul>
<h2 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h2><p>一个行为类似函数的对象</p>
<p>可以没有参数，也可以带有若干参数</p>
<p>其功能是获取一个值，或者改变操作的状态</p>
<p>普通函数就是函数对象</p>
<p>重载了“()”运算符的类的实例是函数对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt; //包含数值算法头文件</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MultClass</span>&#123;</span>  <span class="comment">//定义MultClass类</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">//重载操作符operator()</span></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> x * y; &#125;   </div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> a[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">int</span> N = <span class="keyword">sizeof</span>(a) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The result by multipling all elements in a is "</span></div><div class="line">        &lt;&lt; accumulate(a, a + N, <span class="number">1</span>, MultClass()) <span class="comment">//将类multclass传递给通用算法</span></div><div class="line">        &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;functional&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> intArr[] = &#123; <span class="number">30</span>, <span class="number">90</span>, <span class="number">10</span>, <span class="number">40</span>, <span class="number">70</span>, <span class="number">50</span>, <span class="number">20</span>, <span class="number">80</span> &#125;;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">int</span> N = <span class="keyword">sizeof</span>(intArr) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a(intArr, intArr + N);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"before sorting:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    copy(a.begin(),a.end(),ostream_iterator&lt;<span class="keyword">int</span>&gt;(<span class="built_in">cout</span>,<span class="string">"\t"</span>));</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    sort(a.begin(), a.end(), greater&lt;<span class="keyword">int</span>&gt;()); <span class="comment">//STL中的二元谓词函数对象</span></div><div class="line"></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"after sorting:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    copy(a.begin(),a.end(),ostream_iterator&lt;<span class="keyword">int</span>&gt;(<span class="built_in">cout</span>,<span class="string">"\t"</span>));</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="I-O流"><a href="#I-O流" class="headerlink" title="I/O流"></a>I/O流</h1><h2 id="操纵符（manipulator）"><a href="#操纵符（manipulator）" class="headerlink" title="操纵符（manipulator）"></a>操纵符（manipulator）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用width控制输出宽度</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">        <span class="built_in">cout</span>.width(<span class="number">10</span>);</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果:</span></div><div class="line"><span class="comment">      1.23</span></div><div class="line"><span class="comment">     35.36</span></div><div class="line"><span class="comment">     653.7</span></div><div class="line"><span class="comment">   4358.24</span></div><div class="line"><span class="comment">   */</span></div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用setw操纵符指定宽度</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="built_in">string</span> names[] = &#123; <span class="string">"Zoot"</span>, <span class="string">"Jimmy"</span>, <span class="string">"Al"</span>, <span class="string">"Stan"</span> &#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</div><div class="line">      <span class="built_in">cout</span> &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; names[i] </div><div class="line">     &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果:</span></div><div class="line"><span class="comment">  Zoot      1.23</span></div><div class="line"><span class="comment"> Jimmy     35.36</span></div><div class="line"><span class="comment">    Al     653.7</span></div><div class="line"><span class="comment">  Stan   4358.24</span></div><div class="line"><span class="comment">  */</span></div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置对齐方式</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="built_in">string</span> names[] = &#123; <span class="string">"Zoot"</span>, <span class="string">"Jimmy"</span>, <span class="string">"Al"</span>, <span class="string">"Stan"</span> &#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</div><div class="line">      <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::left)<span class="comment">//左对齐</span></div><div class="line">           &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; names[i]</div><div class="line">           &lt;&lt; resetiosflags(ios_base::left)</div><div class="line">           &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果:</span></div><div class="line"><span class="comment">Zoot        1.23</span></div><div class="line"><span class="comment">Jimmy      35.36</span></div><div class="line"><span class="comment">Al         653.7</span></div><div class="line"><span class="comment">Stan     4358.24</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//控制输出精度——未指定fixed或scientific</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="built_in">string</span> names[] = &#123; <span class="string">"Zoot"</span>, <span class="string">"Jimmy"</span>, <span class="string">"Al"</span>, <span class="string">"Stan"</span> &#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</div><div class="line">      <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::left)</div><div class="line">        &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; names[i]</div><div class="line">        &lt;&lt; resetiosflags(ios_base::left)<span class="comment">//清除左对齐设置</span></div><div class="line">        &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; setprecision(<span class="number">1</span>) &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果：</span></div><div class="line"><span class="comment">Zoot           1</span></div><div class="line"><span class="comment">Jimmy     4e+001</span></div><div class="line"><span class="comment">Al        7e+002</span></div><div class="line"><span class="comment">Stan      4e+003</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//控制输出精度——指定fixed</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="built_in">string</span> names[] = &#123; <span class="string">"Zoot"</span>, <span class="string">"Jimmy"</span>, <span class="string">"Al"</span>, <span class="string">"Stan"</span> &#125;;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::fixed);   </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</div><div class="line">      <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::left)</div><div class="line">        &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; names[i]</div><div class="line">        &lt;&lt; resetiosflags(ios_base::left)<span class="comment">//清除左对齐设置</span></div><div class="line">        &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; setprecision(<span class="number">1</span>) &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">输出结果：</div><div class="line">Zoot         <span class="number">1.2</span></div><div class="line">Jimmy       <span class="number">35.4</span></div><div class="line">Al         <span class="number">653.7</span></div><div class="line">Stan      <span class="number">4358.2</span></div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//控制输出精度——指定scientific</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> values[] = &#123; <span class="number">1.23</span>, <span class="number">35.36</span>, <span class="number">653.7</span>, <span class="number">4358.24</span> &#125;;</div><div class="line">    <span class="built_in">string</span> names[] = &#123; <span class="string">"Zoot"</span>, <span class="string">"Jimmy"</span>, <span class="string">"Al"</span>, <span class="string">"Stan"</span> &#125;;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::scientific);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</div><div class="line">      <span class="built_in">cout</span> &lt;&lt; setiosflags(ios_base::left)</div><div class="line">        &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; names[i]</div><div class="line">        &lt;&lt; resetiosflags(ios_base::left)<span class="comment">//清除左对齐设置</span></div><div class="line">        &lt;&lt; setw(<span class="number">10</span>) &lt;&lt; setprecision(<span class="number">1</span>) &lt;&lt; values[i] &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">输出结果：</div><div class="line">Zoot    <span class="number">1.2e+000</span></div><div class="line">Jimmy   <span class="number">3.5e+001</span></div><div class="line">Al      <span class="number">6.5e+002</span></div><div class="line">Stan    <span class="number">4.4e+003</span></div></pre></td></tr></table></figure>
<h2 id="二进制文件流"><a href="#二进制文件流" class="headerlink" title="二进制文件流"></a>二进制文件流</h2><p>使用ofstream构造函数中的模式参量指定二进制输出模式或以通常方式构造一个流，然后使用setmode成员函数，在文件打开后改变模式</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//向二进制文件输出</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Date</span> &#123;</span> </div><div class="line">    <span class="keyword">int</span> mon, day, year;  </div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    Date dt = &#123; <span class="number">6</span>, <span class="number">10</span>, <span class="number">92</span> &#125;;</div><div class="line">    <span class="function">ofstream <span class="title">file</span><span class="params">(<span class="string">"date.dat"</span>, ios_base::binary)</span></span>;</div><div class="line">    file.write(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(&amp;dt),<span class="keyword">sizeof</span>(dt));</div><div class="line">    file.close();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="字符串输出流（-ostringstream-）"><a href="#字符串输出流（-ostringstream-）" class="headerlink" title="字符串输出流（ ostringstream ）"></a>字符串输出流（ ostringstream ）</h2><p>将字符串作为输出流的目标，可以实现将其他数据类型转换为字符串的功能</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//用ostringstream将数值转换为字符串</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//函数模板toString可以将各种支持“&lt;&lt;“插入符的类型的对象转换为字符串。</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">inline</span> <span class="title">string</span> <span class="title">toString</span>(<span class="title">const</span> <span class="title">T</span> &amp;<span class="title">v</span>) &#123;</span></div><div class="line">    <span class="built_in">ostringstream</span> os;   <span class="comment">//创建字符串输出流</span></div><div class="line">    os &lt;&lt; v;        <span class="comment">//将变量v的值写入字符串流</span></div><div class="line">    <span class="keyword">return</span> os.str();    <span class="comment">//返回输出流生成的字符串</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> str1 = toString(<span class="number">5</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; str1 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">string</span> str2 = toString(<span class="number">1.2</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; str2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果：</span></div><div class="line"><span class="comment">5</span></div><div class="line"><span class="comment">1.2</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<h2 id="输入流"><a href="#输入流" class="headerlink" title="输入流"></a>输入流</h2><h3 id="重要的输入流类"><a href="#重要的输入流类" class="headerlink" title="重要的输入流类"></a>重要的输入流类</h3><ul>
<li>istream类最适合用于顺序文本模式输入，cin是其实例</li>
<li>ifstream类支持磁盘文件输入</li>
<li>istringstream类支持从内存中的字符串输入</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//get函数应用举例</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">char</span> ch;</div><div class="line">    <span class="keyword">while</span> ((ch = <span class="built_in">cin</span>.get()) != EOF)</div><div class="line">        <span class="built_in">cout</span>.put(ch);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//为输入流指定一个终止字符</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> line;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Type a line terminated by 't' "</span> &lt;&lt; <span class="built_in">endl</span>; </div><div class="line">    getline(<span class="built_in">cin</span>, line, <span class="string">'t'</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; line &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//从文件读一个二进制记录到一个结构中</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SalaryInfo</span> &#123;</span></div><div class="line">    <span class="keyword">unsigned</span> id;</div><div class="line">    <span class="keyword">double</span> salary;</div><div class="line">&#125;; </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    SalaryInfo employee1 = &#123; <span class="number">600001</span>, <span class="number">8000</span> &#125;;</div><div class="line">    <span class="function">ofstream <span class="title">os</span><span class="params">(<span class="string">"payroll"</span>, ios_base::out | ios_base::binary)</span></span>;</div><div class="line">    os.write(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(&amp;employee1), <span class="keyword">sizeof</span>(employee1));</div><div class="line">    os.close();</div><div class="line">    <span class="function">ifstream <span class="title">is</span><span class="params">(<span class="string">"payroll"</span>, ios_base::in | ios_base::binary)</span></span>;</div><div class="line">    <span class="keyword">if</span> (is) &#123;</div><div class="line">        SalaryInfo employee2;</div><div class="line">        is.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(&amp;employee2), <span class="keyword">sizeof</span>(employee2));</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; employee2.id &lt;&lt; <span class="string">" "</span> &lt;&lt; employee2.salary &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: Cannot open file 'payroll'."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    is.close();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//用seekg函数设置位置指针</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> values[] = &#123; <span class="number">3</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">4</span> &#125;;</div><div class="line">    <span class="function">ofstream <span class="title">os</span><span class="params">(<span class="string">"integers"</span>, ios_base::out | ios_base::binary)</span></span>;</div><div class="line">    os.write(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(values), <span class="keyword">sizeof</span>(values));</div><div class="line">    os.close();</div><div class="line"></div><div class="line">    <span class="function">ifstream <span class="title">is</span><span class="params">(<span class="string">"integers"</span>, ios_base::in | ios_base::binary)</span></span>;</div><div class="line">    <span class="keyword">if</span> (is) &#123;</div><div class="line">        is.seekg(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">        <span class="keyword">int</span> v;</div><div class="line">        is.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(&amp;v), <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The 4th integer in the file 'integers' is "</span> &lt;&lt; v &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: Cannot open file 'integers'."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//读一个文件并显示出其中0元素的位置</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="function">ifstream <span class="title">file</span><span class="params">(<span class="string">"integers"</span>, ios_base::in | ios_base::binary)</span></span>;</div><div class="line">    <span class="keyword">if</span> (file) &#123;</div><div class="line">        <span class="keyword">while</span> (file) &#123;<span class="comment">//读到文件尾file为0</span></div><div class="line">            streampos here = file.tellg();</div><div class="line">            <span class="keyword">int</span> v;</div><div class="line">            file.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span> *&gt;(&amp;v), <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">            <span class="keyword">if</span> (file &amp;&amp; v == <span class="number">0</span>) </div><div class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Position "</span> &lt;&lt; here &lt;&lt; <span class="string">" is 0"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: Cannot open file 'integers'."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    file.close();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="字符串输入流（-istringstream）"><a href="#字符串输入流（-istringstream）" class="headerlink" title="字符串输入流（ istringstream）"></a>字符串输入流（ istringstream）</h3><p>将字符串作为文本输入流的源，可以将字符串转换为其他数据类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//用istringstream将字符串转换为数值</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">inline</span> <span class="title">T</span> <span class="title">fromString</span>(<span class="title">const</span> <span class="title">string</span> &amp;<span class="title">str</span>) &#123;</span></div><div class="line">    <span class="function"><span class="built_in">istringstream</span> <span class="title">is</span><span class="params">(str)</span></span>;  <span class="comment">//创建字符串输入流</span></div><div class="line">    T v;</div><div class="line">    is &gt;&gt; v;    <span class="comment">//从字符串输入流中读取变量v</span></div><div class="line">    <span class="keyword">return</span> v;   <span class="comment">//返回变量v</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> v1 = fromString&lt;<span class="keyword">int</span>&gt;(<span class="string">"5"</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; v1 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">double</span> v2 = fromString&lt;<span class="keyword">double</span>&gt;(<span class="string">"1.2"</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; v2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">输出结果：</span></div><div class="line"><span class="comment">5</span></div><div class="line"><span class="comment">1.2</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<h2 id="输入-输出流"><a href="#输入-输出流" class="headerlink" title="输入/输出流"></a>输入/输出流</h2><p>两个重要的输入/输出流</p>
<ul>
<li>一个iostream对象可以是数据的源或目的</li>
<li>两个重要的I/O流类都是从iostream派生的，它们是fstream和stringstream。这些类继承了前面描述的istream和ostream类的功能</li>
</ul>
<h3 id="fstream类"><a href="#fstream类" class="headerlink" title="fstream类"></a>fstream类</h3><ul>
<li>fstream类支持磁盘文件输入和输出</li>
<li>如果需要在同一个程序中从一个特定磁盘文件读并写到该磁盘文件，可以构造一个fstream对象</li>
<li>一个fstream对象是有两个逻辑子流的单个流，两个子流一个用于输入，另一个用于输出</li>
</ul>
<h3 id="stringstream类"><a href="#stringstream类" class="headerlink" title="stringstream类"></a>stringstream类</h3><ul>
<li>stringstream类支持面向字符串的输入和输出</li>
<li>可以用于对同一个字符串的内容交替读写，同样是由两个逻辑子流构成</li>
</ul>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="异常接口声明"><a href="#异常接口声明" class="headerlink" title="异常接口声明"></a>异常接口声明</h2><p>一个函数显式声明可能抛出的异常，有利于函数的调用者为异常处理做好准备</p>
<p>可以在函数的声明中列出这个函数可能抛掷的所有异常类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void fun() throw(A，B，C，D);</div></pre></td></tr></table></figure>
<p>若无异常接口声明，则此函数可以抛掷任何类型的异常</p>
<p>不抛掷任何类型异常的函数声明如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void fun() throw();</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (y == <span class="number">0</span>)</div><div class="line">        <span class="keyword">throw</span> x;</div><div class="line">    <span class="keyword">return</span> x / y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"5 / 2 = "</span> &lt;&lt; divide(<span class="number">5</span>, <span class="number">2</span>) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"8 / 0 = "</span> &lt;&lt; divide(<span class="number">8</span>, <span class="number">0</span>) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"7 / 1 = "</span> &lt;&lt; divide(<span class="number">7</span>, <span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">int</span> e) &#123; <span class="comment">//若改成float e就不会catch到</span></div><div class="line">        <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="string">" is divided by zero!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"That is ok."</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="自动的析构"><a href="#自动的析构" class="headerlink" title="自动的析构"></a>自动的析构</h2><p>找到一个匹配的catch异常处理后</p>
<ul>
<li>初始化异常参数</li>
<li>将从对应的try块开始到异常被抛掷处之间构造（且尚未析构）的所有自动对象进行析构</li>
</ul>
<p>从最后一个catch处理之后开始恢复执行</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyException(<span class="keyword">const</span> <span class="built_in">string</span> &amp;message) : message(message) &#123;&#125;</div><div class="line">    ~MyException() &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">const</span> <span class="built_in">string</span> &amp;<span class="title">getMessage</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> message; &#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="built_in">string</span> message;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Demo() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Constructor of Demo"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</div><div class="line">    ~Demo() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor of Demo"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span> <span class="params">(MyException)</span> </span>&#123;</div><div class="line">    Demo d;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Throw MyException in func()"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">throw</span> MyException(<span class="string">"exception thrown by func()"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"In main function"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        func();</div><div class="line">    &#125; <span class="keyword">catch</span> (MyException&amp; e) &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Caught an exception: "</span> &lt;&lt; e.getMessage() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125; </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Resume the execution of main()"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">运行结果：</span></div><div class="line"><span class="comment">In main function</span></div><div class="line"><span class="comment">Constructor of Demo</span></div><div class="line"><span class="comment">Throw MyException in func()</span></div><div class="line"><span class="comment">Destructor of Demo</span></div><div class="line"><span class="comment">Caught an exception: exception thrown by func()</span></div><div class="line"><span class="comment">Resume the execution of main()</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>donate the author</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="陆轩韬 WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="陆轩韬 Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/24/JetsonTX2自主无人车原型开发/" rel="next" title="JetsonTX2自主无人车原型开发">
                <i class="fa fa-chevron-left"></i> JetsonTX2自主无人车原型开发
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/09/春招面试心路/" rel="prev" title="春招面试心路">
                春招面试心路 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzM1Mi85OTA4"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="陆轩韬" />
          <p class="site-author-name" itemprop="name">陆轩韬</p>
           
              <p class="site-description motion-element" itemprop="description">一只等待进化为程序猿的猴子</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">42</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/luxuantao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
          
		
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://luxuantao.github.io/web/index.html" title="个人主页 @ 陆轩韬" target="_blank">个人主页 @ 陆轩韬</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://jxtxzzw.com/" title="jxtxzzw空间 @ 张臻炜" target="_blank">jxtxzzw空间 @ 张臻炜</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#内联函数"><span class="nav-number">1.</span> <span class="nav-text">内联函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#constexpr函数"><span class="nav-number">2.</span> <span class="nav-text">constexpr函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#重载函数"><span class="nav-number">3.</span> <span class="nav-text">重载函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#构造函数"><span class="nav-number">4.</span> <span class="nav-text">构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#默认构造函数"><span class="nav-number">4.1.</span> <span class="nav-text">默认构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐含生成的构造函数"><span class="nav-number">4.2.</span> <span class="nav-text">隐含生成的构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#default"><span class="nav-number">4.3.</span> <span class="nav-text">=default</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#委托构造函数"><span class="nav-number">4.4.</span> <span class="nav-text">委托构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复制构造函数"><span class="nav-number">4.5.</span> <span class="nav-text">复制构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐含的复制构造函数"><span class="nav-number">4.6.</span> <span class="nav-text">隐含的复制构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#delete"><span class="nav-number">4.7.</span> <span class="nav-text">=delete</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类的组合"><span class="nav-number">5.</span> <span class="nav-text">类的组合</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#构造组合类对象时的初始化次序"><span class="nav-number">5.1.</span> <span class="nav-text">构造组合类对象时的初始化次序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前向引用声明"><span class="nav-number">5.2.</span> <span class="nav-text">前向引用声明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#联合体"><span class="nav-number">6.</span> <span class="nav-text">联合体</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#枚举类"><span class="nav-number">7.</span> <span class="nav-text">枚举类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类的友元"><span class="nav-number">8.</span> <span class="nav-text">类的友元</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#友元函数"><span class="nav-number">8.1.</span> <span class="nav-text">友元函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#友元类"><span class="nav-number">8.2.</span> <span class="nav-text">友元类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类的友元关系是单向的"><span class="nav-number">8.3.</span> <span class="nav-text">类的友元关系是单向的</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常类型"><span class="nav-number">9.</span> <span class="nav-text">常类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多文件结构"><span class="nav-number">10.</span> <span class="nav-text">多文件结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#外部变量"><span class="nav-number">10.1.</span> <span class="nav-text">外部变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外部函数"><span class="nav-number">10.2.</span> <span class="nav-text">外部函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编译预处理指令"><span class="nav-number">11.</span> <span class="nav-text">编译预处理指令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指针"><span class="nav-number">12.</span> <span class="nav-text">指针</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#空值nullptr"><span class="nav-number">12.1.</span> <span class="nav-text">空值nullptr</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指向常量的指针"><span class="nav-number">12.2.</span> <span class="nav-text">指向常量的指针</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针类型的常量"><span class="nav-number">12.3.</span> <span class="nav-text">指针类型的常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数指针"><span class="nav-number">12.4.</span> <span class="nav-text">函数指针</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#智能指针"><span class="nav-number">12.5.</span> <span class="nav-text">智能指针</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#移动构造"><span class="nav-number">13.</span> <span class="nav-text">移动构造</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#左值和右值"><span class="nav-number">13.1.</span> <span class="nav-text">左值和右值</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#读入字符串"><span class="nav-number">14.</span> <span class="nav-text">读入字符串</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#继承"><span class="nav-number">15.</span> <span class="nav-text">继承</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#公有继承-public"><span class="nav-number">15.1.</span> <span class="nav-text">公有继承(public)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#私有继承-private"><span class="nav-number">15.2.</span> <span class="nav-text">私有继承(private)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保护继承-protected"><span class="nav-number">15.3.</span> <span class="nav-text">保护继承(protected)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#派生类的构造函数"><span class="nav-number">16.</span> <span class="nav-text">派生类的构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#多继承且有对象成员时派生的构造函数定义语法"><span class="nav-number">16.1.</span> <span class="nav-text">多继承且有对象成员时派生的构造函数定义语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构造函数的执行顺序"><span class="nav-number">16.2.</span> <span class="nav-text">构造函数的执行顺序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#派生类复制构造函数"><span class="nav-number">17.</span> <span class="nav-text">派生类复制构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#派生类未定义复制构造函数的情况"><span class="nav-number">17.1.</span> <span class="nav-text">派生类未定义复制构造函数的情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#派生类定义了复制构造函数的情况"><span class="nav-number">17.2.</span> <span class="nav-text">派生类定义了复制构造函数的情况</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#派生类的析构函数"><span class="nav-number">18.</span> <span class="nav-text">派生类的析构函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#访问从基类继承的成员"><span class="nav-number">19.</span> <span class="nav-text">访问从基类继承的成员</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#虚基类"><span class="nav-number">20.</span> <span class="nav-text">虚基类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#虚基类及其派生类构造函数"><span class="nav-number">20.1.</span> <span class="nav-text">虚基类及其派生类构造函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#运算符重载"><span class="nav-number">21.</span> <span class="nav-text">运算符重载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#双目运算符重载规则"><span class="nav-number">21.1.</span> <span class="nav-text">双目运算符重载规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前置单目运算符重载规则"><span class="nav-number">21.2.</span> <span class="nav-text">前置单目运算符重载规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#后置单目运算符-和–重载规则"><span class="nav-number">21.3.</span> <span class="nav-text">后置单目运算符 ++和–重载规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符重载为非成员函数"><span class="nav-number">21.4.</span> <span class="nav-text">运算符重载为非成员函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#运算符重载为非成员函数的规则"><span class="nav-number">21.4.1.</span> <span class="nav-text">运算符重载为非成员函数的规则</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#虚函数"><span class="nav-number">22.</span> <span class="nav-text">虚函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#virtual-关键字"><span class="nav-number">22.1.</span> <span class="nav-text">virtual 关键字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚析构函数"><span class="nav-number">22.2.</span> <span class="nav-text">虚析构函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚表与动态绑定"><span class="nav-number">22.3.</span> <span class="nav-text">虚表与动态绑定</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#抽象类和纯虚函数"><span class="nav-number">23.</span> <span class="nav-text">抽象类和纯虚函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#抽象类作用"><span class="nav-number">23.1.</span> <span class="nav-text">抽象类作用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#override"><span class="nav-number">24.</span> <span class="nav-text">override</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#final"><span class="nav-number">25.</span> <span class="nav-text">final</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模板"><span class="nav-number">26.</span> <span class="nav-text">模板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#函数模板"><span class="nav-number">26.1.</span> <span class="nav-text">函数模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类模板"><span class="nav-number">26.2.</span> <span class="nav-text">类模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组类模板"><span class="nav-number">26.3.</span> <span class="nav-text">数组类模板</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#泛型程序设计与STL"><span class="nav-number">27.</span> <span class="nav-text">泛型程序设计与STL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#迭代器"><span class="nav-number">27.1.</span> <span class="nav-text">迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逆向迭代器"><span class="nav-number">27.2.</span> <span class="nav-text">逆向迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数对象"><span class="nav-number">27.3.</span> <span class="nav-text">函数对象</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#I-O流"><span class="nav-number">28.</span> <span class="nav-text">I/O流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#操纵符（manipulator）"><span class="nav-number">28.1.</span> <span class="nav-text">操纵符（manipulator）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#"><span class="nav-number">28.1.1.</span> <span class="nav-text"> </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二进制文件流"><span class="nav-number">28.2.</span> <span class="nav-text">二进制文件流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串输出流（-ostringstream-）"><span class="nav-number">28.3.</span> <span class="nav-text">字符串输出流（ ostringstream ）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入流"><span class="nav-number">28.4.</span> <span class="nav-text">输入流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#重要的输入流类"><span class="nav-number">28.4.1.</span> <span class="nav-text">重要的输入流类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串输入流（-istringstream）"><span class="nav-number">28.4.2.</span> <span class="nav-text">字符串输入流（ istringstream）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入-输出流"><span class="nav-number">28.5.</span> <span class="nav-text">输入/输出流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fstream类"><span class="nav-number">28.5.1.</span> <span class="nav-text">fstream类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stringstream类"><span class="nav-number">28.5.2.</span> <span class="nav-text">stringstream类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#异常处理"><span class="nav-number">29.</span> <span class="nav-text">异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#异常接口声明"><span class="nav-number">29.1.</span> <span class="nav-text">异常接口声明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自动的析构"><span class="nav-number">29.2.</span> <span class="nav-text">自动的析构</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user-o" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陆轩韬</span>
</div>

<!--

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
-->

<!--
<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>
-->

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共50.9k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  







  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("56AdvCz2CdFFai1IYTnP9VvW-gzGzoHsz", "lUYIn1nVPECkvjqjN7cLvimt");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
